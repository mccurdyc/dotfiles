#!/bin/bash

## run `tfsec terraform plan` and not need to do any secrets stuff, so long as youâ€™re in a directory with a name equal to the applicable amazon profile
alias tfsec='eval $(AWS_PROFILE=${PWD##*/} sops --decrypt --input-type env secrets.env | egrep -v "^#" | xargs)'

## docker
alias docker_force_clean_system="docker system prune --all --force"
alias docker_force_clean_images="docker rmi --force $(docker images -a -q)"

## tree
alias tree="tree --dirsfirst --noreport -ACF"
alias treea="tree -a"                         ## tree all
alias treed="tree -d"                         ## tree dirs
alias tree1="tree -d -L 1"                    ## tree depth 1
alias tree2="tree -d -L 2"                    ## tree depth 2
alias tree3="tree -d -L 3"                    ## tree depth 3

# source zsh config
alias src="source $HOME/.zshrc"

## quick cd routes
alias cddot="cd $DOTFILES_DIR"

## grep
alias grep="grep --color=auto --exclude=tags --exclude-dir=.git"
alias fgrep="fgrep --color=auto"
alias egrep="egrep --color=auto"

## tmux
alias tl='tmux list-sessions'
alias ta='tmux attach -t '
alias td='tmux detach'
alias tu='unset TMUX'
alias tn='tmux new'
alias tk='tmux kill-session -t'

## rm
alias rm="rm -i"
alias mv="mv -i"

## mkdir
alias mkdir="mkdir -pv"

## git
alias gita='git add'
alias gitc='git commit'
alias gitch='git checkout'
alias gits="git status"

# clean local and remote "dead" branches
alias gitclean='git remote prune origin && git branch --merged | egrep -v "(^\*|master|dev)" | xargs git branch -d'
alias gitpp='git push -u origin $(git branch | grep \* | cut -d ' ' -f2)'

## resource usage
alias jo="jobs -l"
alias free="free -h"
alias df="df -h"

# Linux specific aliases
alias pbcopy='xclip -selection clipboard'
alias pbpaste='xclip -selection clipboard -o'

# Detect which `ls` flavor is in use
if ls --color > /dev/null 2>&1; then # GNU `ls`
	colorflag="--color"
else # OS X `ls`
	colorflag="-G"
fi

# List all files colorized in long format
# shellcheck disable=SC2139
alias l="ls -lhF ${colorflag}"

# List all files colorized in long format, including dot files
# shellcheck disable=SC2139
alias la="ls -lahF ${colorflag}"

# List only directories
# shellcheck disable=SC2139
alias lsd="ls -lhF ${colorflag} | grep --color=never '^d'"

# Always use color output for `ls`
# shellcheck disable=SC2139
alias ls="command ls ${colorflag}"
export LS_COLORS='no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.ogg=01;35:*.mp3=01;35:*.wav=01;35:'

# Always enable colored `grep` output
alias grep='grep --color=auto '

# IP Addresses
alias localip="sudo ifconfig | grep -Eo 'inet (addr:)?([0-9]*\\.){3}[0-9]*' | grep -Eo '([0-9]*\\.){3}[0-9]*' | grep -v '127.0.0.1'"

# copy working directory
alias cwd='pwd | tr -d "\r\n" | xclip -selection clipboard'
alias kc="kubectl"
